const body=document.body,menu=document.querySelector(".header__menu");function toggleElement(e,t){t.classList.contains("active")?(t.classList.remove("active"),e.classList.remove("lock")):(t.classList.add("active"),e.classList.add("lock"))}function burgerHandler(){requestAnimationFrame(()=>toggleElement(body,menu))}const popup=document.querySelector(".popup"),requestButtons=document.querySelectorAll(".request__btn"),closePopup=document.querySelector(".popup__close");function popupHandler(){requestAnimationFrame(()=>toggleElement(body,popup))}function hidePopup(){popup.classList.remove("active"),body.classList.remove("lock")}function toggleHeader(e){let n=window.scrollY||document.documentElement.scrollTop,r,o=0,s=0;const a=document.querySelector(".header");window.addEventListener("scroll",function(){if(r=window.scrollY||document.documentElement.scrollTop,r>n?o=2:r<n&&(o=1),o!==s){var e=o,t=r;if(e===2&&t>100){a.classList.add("hide");s=e}else if(e===1){a.classList.remove("hide");s=e}}n=r})}function addFixedClassToHeader(){const e=document.querySelector(".header");let t=e.offsetHeight+300;window.addEventListener("scroll",function(){this.scrollY>t?e.classList.add("fixed"):e.classList.remove("fixed")})}const form=document.querySelector(".popup__form"),errorMessage=document.querySelector(".popup__error"),inputs=Array.from(document.querySelectorAll(".popup__input"));function showError(e){console.log(e.name),"name"===e.name?e.validity.valueMissing?(e.nextElementSibling.classList.add("error"),errorMessage.textContent="Fill in all the required fields."):e.validity.tooShort&&(e.nextElementSibling.classList.add("error"),errorMessage.textContent=`Name should be at least ${e.minLength} characters; you entered ${e.value.length}.`):"phone"===e.name&&e.validity.valueMissing&&(e.nextElementSibling.classList.add("error"),errorMessage.textContent="Fill in all the required fields."),errorMessage.className="popup__error active"}function addPhoneMask(e){const t=e.target,n=t.dataset.phoneClear,r=t.dataset.phonePattern,o=r||"+7(___) ___-__-__",s=0,a=o.replace(/\D/g,""),l=e.target.value.replace(/\D/g,"");"false"!==n&&"blur"===e.type&&l.length<o.match(/([\_\d])/g).length?e.target.value="":(a.length>=l.length&&(l=a),e.target.value=o.replace(/./g,function(e){return/[_\d]/.test(e)&&s<l.length?l.charAt(s++):s>=l.length?"":e}))}document.addEventListener("DOMContentLoaded",function(e){const t=document.querySelector(".header__burger"),n=(window.innerWidth<=1599&&t.addEventListener("click",burgerHandler),window.matchMedia("(max-width: 1599px)"));n.addEventListener("change",function(e){e.matches?t.addEventListener("click",burgerHandler):(t.removeEventListener("click",burgerHandler),menu.classList.remove("active"),body.classList.remove("lock"))}),requestButtons.forEach(e=>e.addEventListener("click",popupHandler)),closePopup.addEventListener("click",hidePopup),toggleHeader(),addFixedClassToHeader(),inputs.forEach(e=>e.addEventListener("input",()=>{e.validity.valid?(errorMessage.textContent="",errorMessage.className="popup__error",e.nextElementSibling.classList.remove("error")):showError(e)})),form.addEventListener("submit",function(t){inputs.forEach(e=>{e.validity.valid||(t.preventDefault(),showError(e))})});const r=document.getElementById("phoneInput");for(var o of["input","blur","focus"])r.addEventListener(o,addPhoneMask)});